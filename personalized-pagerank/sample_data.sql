CREATE TABLE PRODUCT (
    PRODUCT_ID     NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME           VARCHAR2(100),
    CATEGORY       VARCHAR2(50),
    PRICE          NUMBER(10,2),
    STOCK_QTY      NUMBER
);

-- Dados de exemplo
INSERT INTO PRODUCT (NAME, CATEGORY, PRICE, STOCK_QTY) VALUES ('Notebook Dell XPS 13', 'Eletrônicos', 7499.99, 50);
INSERT INTO PRODUCT (NAME, CATEGORY, PRICE, STOCK_QTY) VALUES ('Smartphone Samsung S23', 'Eletrônicos', 5999.00, 80);
INSERT INTO PRODUCT (NAME, CATEGORY, PRICE, STOCK_QTY) VALUES ('Cadeira Gamer ThunderX', 'Móveis', 1200.00, 20);
INSERT INTO PRODUCT (NAME, CATEGORY, PRICE, STOCK_QTY) VALUES ('Fone de Ouvido JBL', 'Áudio', 349.90, 150);
INSERT INTO PRODUCT (NAME, CATEGORY, PRICE, STOCK_QTY) VALUES ('Monitor LG 27"', 'Eletrônicos', 1899.00, 35);

CREATE TABLE CUSTOMER (
    CUSTOMER_ID    NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME           VARCHAR2(100),
    EMAIL          VARCHAR2(100),
    PHONE          VARCHAR2(20),
    CREATED_AT     DATE DEFAULT SYSDATE
);

-- Dados de exemplo
INSERT INTO CUSTOMER (NAME, EMAIL, PHONE) VALUES ('João Silva', 'joao.silva@email.com', '11999999999');
INSERT INTO CUSTOMER (NAME, EMAIL, PHONE) VALUES ('Maria Oliveira', 'maria.oliveira@email.com', '21988888888');
INSERT INTO CUSTOMER (NAME, EMAIL, PHONE) VALUES ('Pedro Souza', 'pedro.souza@email.com', '31977777777');
INSERT INTO CUSTOMER (NAME, EMAIL, PHONE) VALUES ('Ana Lima', 'ana.lima@email.com', '41966666666');
INSERT INTO CUSTOMER (NAME, EMAIL, PHONE) VALUES ('Lucas Martins', 'lucas.martins@email.com', '51955555555');

CREATE TABLE SALES_HISTORY (
    SALE_ID        NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    CUSTOMER_ID    NUMBER,
    PRODUCT_ID     NUMBER,
    SALE_DATE      DATE,
    QUANTITY       NUMBER,
    TOTAL_AMOUNT   NUMBER(10,2),
    CONSTRAINT FK_CUSTOMER FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID),
    CONSTRAINT FK_PRODUCT FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID)
);

-- Dados de exemplo
INSERT INTO SALES_HISTORY (CUSTOMER_ID, PRODUCT_ID, SALE_DATE, QUANTITY, TOTAL_AMOUNT)
VALUES (1, 1, TO_DATE('2024-12-01', 'YYYY-MM-DD'), 1, 7499.99);

INSERT INTO SALES_HISTORY (CUSTOMER_ID, PRODUCT_ID, SALE_DATE, QUANTITY, TOTAL_AMOUNT)
VALUES (2, 2, TO_DATE('2025-01-15', 'YYYY-MM-DD'), 2, 11998.00);

INSERT INTO SALES_HISTORY (CUSTOMER_ID, PRODUCT_ID, SALE_DATE, QUANTITY, TOTAL_AMOUNT)
VALUES (3, 4, TO_DATE('2025-03-10', 'YYYY-MM-DD'), 3, 1049.70);

INSERT INTO SALES_HISTORY (CUSTOMER_ID, PRODUCT_ID, SALE_DATE, QUANTITY, TOTAL_AMOUNT)
VALUES (1, 3, TO_DATE('2025-04-20', 'YYYY-MM-DD'), 1, 1200.00);

INSERT INTO SALES_HISTORY (CUSTOMER_ID, PRODUCT_ID, SALE_DATE, QUANTITY, TOTAL_AMOUNT)
VALUES (4, 5, TO_DATE('2025-05-05', 'YYYY-MM-DD'), 1, 1899.00);

-- João Silva (1) compra Monitor LG 27"
INSERT INTO SALES_HISTORY (CUSTOMER_ID, PRODUCT_ID, SALE_DATE, QUANTITY, TOTAL_AMOUNT)
VALUES (1, 5, TO_DATE('2025-05-10', 'YYYY-MM-DD'), 1, 1899.00);

-- Maria Oliveira (2) compra Cadeira Gamer ThunderX
INSERT INTO SALES_HISTORY (CUSTOMER_ID, PRODUCT_ID, SALE_DATE, QUANTITY, TOTAL_AMOUNT)
VALUES (2, 3, TO_DATE('2025-05-12', 'YYYY-MM-DD'), 2, 2400.00);

-- Pedro Souza (3) compra Notebook Dell XPS 13
INSERT INTO SALES_HISTORY (CUSTOMER_ID, PRODUCT_ID, SALE_DATE, QUANTITY, TOTAL_AMOUNT)
VALUES (3, 1, TO_DATE('2025-05-15', 'YYYY-MM-DD'), 1, 7499.99);

-- Ana Lima (4) compra Smartphone Samsung S23
INSERT INTO SALES_HISTORY (CUSTOMER_ID, PRODUCT_ID, SALE_DATE, QUANTITY, TOTAL_AMOUNT)
VALUES (4, 2, TO_DATE('2025-05-16', 'YYYY-MM-DD'), 1, 5999.00);

-- Lucas Martins (5) compra Fone de Ouvido JBL
INSERT INTO SALES_HISTORY (CUSTOMER_ID, PRODUCT_ID, SALE_DATE, QUANTITY, TOTAL_AMOUNT)
VALUES (5, 4, TO_DATE('2025-05-17', 'YYYY-MM-DD'), 2, 699.80);

-- João Silva (1) compra Fone de Ouvido JBL
INSERT INTO SALES_HISTORY (CUSTOMER_ID, PRODUCT_ID, SALE_DATE, QUANTITY, TOTAL_AMOUNT)
VALUES (1, 4, TO_DATE('2025-05-18', 'YYYY-MM-DD'), 1, 349.90);

-- Maria Oliveira (2) compra Monitor LG 27"
INSERT INTO SALES_HISTORY (CUSTOMER_ID, PRODUCT_ID, SALE_DATE, QUANTITY, TOTAL_AMOUNT)
VALUES (2, 5, TO_DATE('2025-05-19', 'YYYY-MM-DD'), 2, 3798.00);

-- Pedro Souza (3) compra Smartphone Samsung S23
INSERT INTO SALES_HISTORY (CUSTOMER_ID, PRODUCT_ID, SALE_DATE, QUANTITY, TOTAL_AMOUNT)
VALUES (3, 2, TO_DATE('2025-05-20', 'YYYY-MM-DD'), 1, 5999.00);

-- Ana Lima (4) compra Notebook Dell XPS 13
INSERT INTO SALES_HISTORY (CUSTOMER_ID, PRODUCT_ID, SALE_DATE, QUANTITY, TOTAL_AMOUNT)
VALUES (4, 1, TO_DATE('2025-05-21', 'YYYY-MM-DD'), 1, 7499.99);

-- Lucas Martins (5) compra Cadeira Gamer ThunderX
INSERT INTO SALES_HISTORY (CUSTOMER_ID, PRODUCT_ID, SALE_DATE, QUANTITY, TOTAL_AMOUNT)
VALUES (5, 3, TO_DATE('2025-05-22', 'YYYY-MM-DD'), 1, 1200.00);


COMMIT;

CREATE PROPERTY GRAPH sales_graph
  VERTEX TABLES (
    customer KEY (customer_id) LABEL customer,  
    product  KEY (product_id) LABEL product
  )
  EDGE TABLES (
    sales_history
     SOURCE      KEY (customer_id) REFERENCES customer (customer_id)
     DESTINATION KEY (product_id)  REFERENCES product (product_id)
     LABEL purchased
);


   